<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Starts acquiring `name` on the bus specified by `bus_type` and calls `name_acquired_handler` and `name_lost_handler` when the name is acquired respectively lost. Callbacks will be invoked in the [thread-default main context][g-main-context-push-thread-default] of the thread you are calling this function from."><title>bus_own_name in gio - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-fbd14db5c88ed452.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="gio" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (db0cbc48d 2023-03-26)" data-search-js="search-0db6af764fd5e08b.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" data-theme-light-css="light-db279b6232be9c13.css" data-theme-dark-css="dark-cf923f49f397b216.css" data-theme-ayu-css="ayu-be46fdc453a55015.css" ></div><script src="../static.files/storage-d4a1a279bad1a0c0.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-9ade54abd4bd73c8.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]-->
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", checkDocsLatestStable);

    function checkDocsLatestStable() {
        function popup(msg, url) { return `
            <style scoped="scoped">
                .popup {
                    max-width: 16em;
                    background-color: #fff;
                    position: fixed;
                    z-index: 1;
                    margin-left: auto;
                    bottom: 1em;
                    right: 1em;
                    border-radius: 5px;
                    box-shadow: 1px 1px 4px #777;
                }

                .popup a.version {
                    color: #e57300;
                    padding: 0.6em 1em;
                    display: block;
                }
                .popup a.version:hover {
                    color: #b25900;
                }

                .popup a.close {
                    color: white;
                    background: grey;
                    border-radius: 99px;
                    display: inline-block;
                    width: 19px;
                    line-height: 19px;
                    font-weight: bold;
                    text-align: center;
                    margin: 0.6em;
                    float: right;
                }
                .popup a.close:hover {
                    background: black;
                }
            </style>
            <section class="popup" id="gir_docs_popup">
                <a class="close" href="#" onclick="document.getElementById('gir_docs_popup').remove(); return false">×</a>
                <a class="version" href="https://gtk-rs.org/gtk-rs-core/stable/latest/docs">
                    ⚠ ${msg}
                </a>
            </section>
        ` };

        if ("0.15" == "master") {
            document.body.insertAdjacentHTML(
                'beforeend',
                popup("This is the development version. Go to latest stable version.", "stable/latest")
            );
        } else {
            fetch('https://gtk-rs.org/gtk-rs-core/LATEST_RELEASE_BRANCH')
                .then(response => response.text())
                .then(latest_branch => {
                    if (latest_branch.trim() != "0.15") {
                        document.body.insertAdjacentHTML(
                            'beforeend',
                            popup("This version is outdated. Go to latest version.", "stable/latest")
                        );
                    }
                });
        }
    }
</script>


<nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../gio/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../gio/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In gio</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">gio</a>::<wbr><a class="fn" href="#">bus_own_name</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/gio/dbus.rs.html#160-191">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn bus_own_name&lt;BusAcquired, NameAcquired, NameLost&gt;(
    bus_type: <a class="enum" href="enum.BusType.html" title="enum gio::BusType">BusType</a>,
    name: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>,
    flags: <a class="struct" href="struct.BusNameOwnerFlags.html" title="struct gio::BusNameOwnerFlags">BusNameOwnerFlags</a>,
    bus_acquired: BusAcquired,
    name_acquired: NameAcquired,
    name_lost: NameLost
) -&gt; <a class="struct" href="struct.OwnerId.html" title="struct gio::OwnerId">OwnerId</a><span class="where fmt-newline">where
    BusAcquired: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,
    NameAcquired: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,
    NameLost: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="struct.DBusConnection.html" title="struct gio::DBusConnection">DBusConnection</a>&gt;, &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static,</span></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Starts acquiring <code>name</code> on the bus specified by <code>bus_type</code> and calls
<code>name_acquired_handler</code> and <code>name_lost_handler</code> when the name is
acquired respectively lost. Callbacks will be invoked in the
[thread-default main context][g-main-context-push-thread-default]
of the thread you are calling this function from.</p>
<p>You are guaranteed that one of the <code>name_acquired_handler</code> and <code>name_lost_handler</code>
callbacks will be invoked after calling this function - there are three
possible cases:</p>
<ul>
<li>
<p><code>name_lost_handler</code> with a <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a> connection (if a connection to the bus
can’t be made).</p>
</li>
<li>
<p><code>bus_acquired_handler</code> then <code>name_lost_handler</code> (if the name can’t be
obtained)</p>
</li>
<li>
<p><code>bus_acquired_handler</code> then <code>name_acquired_handler</code> (if the name was
obtained).</p>
</li>
</ul>
<p>When you are done owning the name, just call <code>g_bus_unown_name()</code>
with the owner id this function returns.</p>
<p>If the name is acquired or lost (for example another application
could acquire the name if you allow replacement or the application
currently owning the name exits), the handlers are also invoked.
If the <a href="struct.DBusConnection.html" title="struct gio::DBusConnection"><code>DBusConnection</code></a> that is used for attempting to own the name
closes, then <code>name_lost_handler</code> is invoked since it is no longer
possible for other processes to access the process.</p>
<p>You cannot use <code>g_bus_own_name()</code> several times for the same name (unless
interleaved with calls to <code>g_bus_unown_name()</code>) - only the first call
will work.</p>
<p>Another guarantee is that invocations of <code>name_acquired_handler</code>
and <code>name_lost_handler</code> are guaranteed to alternate; that
is, if <code>name_acquired_handler</code> is invoked then you are
guaranteed that the next time one of the handlers is invoked, it
will be <code>name_lost_handler</code>. The reverse is also true.</p>
<p>If you plan on exporting objects (using e.g.
<code>g_dbus_connection_register_object()</code>), note that it is generally too late
to export the objects in <code>name_acquired_handler</code>. Instead, you can do this
in <code>bus_acquired_handler</code> since you are guaranteed that this will run
before <code>name</code> is requested from the bus.</p>
<p>This behavior makes it very simple to write applications that wants
to [own names][gdbus-owning-names] and export objects.
Simply register objects to be exported in <code>bus_acquired_handler</code> and
unregister the objects (if any) in <code>name_lost_handler</code>.</p>
<h3 id="bus_type"><a href="#bus_type"><code>bus_type</code></a></h3>
<p>the type of bus to own a name on</p>
<h3 id="name"><a href="#name"><code>name</code></a></h3>
<p>the well-known name to own</p>
<h3 id="flags"><a href="#flags"><code>flags</code></a></h3>
<p>a set of flags from the <a href="struct.BusNameOwnerFlags.html" title="struct gio::BusNameOwnerFlags"><code>BusNameOwnerFlags</code></a> enumeration</p>
<h3 id="bus_acquired_handler"><a href="#bus_acquired_handler"><code>bus_acquired_handler</code></a></h3>
<p>handler to invoke when connected to the bus of type <code>bus_type</code> or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a></p>
<h3 id="name_acquired_handler"><a href="#name_acquired_handler"><code>name_acquired_handler</code></a></h3>
<p>handler to invoke when <code>name</code> is acquired or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a></p>
<h3 id="name_lost_handler"><a href="#name_lost_handler"><code>name_lost_handler</code></a></h3>
<p>handler to invoke when <code>name</code> is lost or <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a></p>
<h2 id="returns"><a href="#returns">Returns</a></h2>
<p>an identifier (never 0) that can be used with
<code>g_bus_unown_name()</code> to stop owning the name.</p>
</div></details></section></div></main></body></html>