<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This function is a wrapper of dgettext() which does not translate the message if the default domain as set with textdomain() has no translations for the current locale."><title>dgettext in glib - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="glib" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (6be96e386 2024-07-09)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]-->
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", checkDocsLatestStable);

    function checkDocsLatestStable() {
        function popup(msg, url) { return `
            <style scoped="scoped">
                .popup {
                    max-width: 16em;
                    background-color: #fff;
                    position: fixed;
                    z-index: 1;
                    margin-left: auto;
                    bottom: 1em;
                    right: 1em;
                    border-radius: 5px;
                    box-shadow: 1px 1px 4px #777;
                }

                .popup a.version {
                    color: #e57300;
                    padding: 0.6em 1em;
                    display: block;
                }
                .popup a.version:hover {
                    color: #b25900;
                }

                .popup a.close {
                    color: white;
                    background: grey;
                    border-radius: 99px;
                    display: inline-block;
                    width: 19px;
                    line-height: 19px;
                    font-weight: bold;
                    text-align: center;
                    margin: 0.6em;
                    float: right;
                }
                .popup a.close:hover {
                    background: black;
                }
            </style>
            <section class="popup" id="gir_docs_popup">
                <a class="close" href="#" onclick="document.getElementById('gir_docs_popup').remove(); return false">×</a>
                <a class="version" href="https://gtk-rs.org/gtk-rs-core/stable/latest/docs">
                    ⚠ ${msg}
                </a>
            </section>
        ` };

        if ("0.20" == "master") {
            document.body.insertAdjacentHTML(
                'beforeend',
                popup("This is the development version. Go to latest stable version.", "stable/latest")
            );
        } else {
            fetch('https://gtk-rs.org/gtk-rs-core/LATEST_RELEASE_BRANCH')
                .then(response => response.text())
                .then(latest_branch => {
                    if (latest_branch.trim() != "0.20") {
                        document.body.insertAdjacentHTML(
                            'beforeend',
                            popup("This version is outdated. Go to latest version.", "stable/latest")
                        );
                    }
                });
        }
    }
</script>


<nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../glib/index.html">glib</a><span class="version">0.20.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">glib</a>::<wbr><a class="fn" href="#">dgettext</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/glib/auto/functions.rs.html#566-573">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn dgettext(domain: <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>&gt;, msgid: &amp;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.str.html">str</a>) -&gt; <a class="struct" href="struct.GString.html" title="struct glib::GString">GString</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This function is a wrapper of dgettext() which does not translate
the message if the default domain as set with textdomain() has no
translations for the current locale.</p>
<p>The advantage of using this function over dgettext() proper is that
libraries using this function (like GTK) will not use translations
if the application using the library does not have translations for
the current locale.  This results in a consistent English-only
interface instead of one having partial translations.  For this
feature to work, the call to textdomain() and setlocale() should
precede any g_dgettext() invocations.  For GTK, it means calling
textdomain() before gtk_init or its variants.</p>
<p>This function disables translations if and only if upon its first
call all the following conditions hold:</p>
<ul>
<li>
<p>@domain is not <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a></p>
</li>
<li>
<p>textdomain() has been called to set a default text domain</p>
</li>
<li>
<p>there is no translations available for the default text domCreates a new instance of a <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> subtype and sets its properties.</p>
</li>
</ul>
<p>Construction parameters (see <a href="struct.ParamFlags.html#associatedconstant.CONSTRUCT" title="associated constant glib::ParamFlags::CONSTRUCT"><code>ParamFlags::CONSTRUCT</code></a>, <a href="struct.ParamFlags.html#associatedconstant.CONSTRUCT_ONLY" title="associated constant glib::ParamFlags::CONSTRUCT_ONLY"><code>ParamFlags::CONSTRUCT_ONLY</code></a>)
which are not explicitly specified are set to their default values. Any
private data for the object is guaranteed to be initialized with zeros, as
per <code>g_type_create_instance()</code>.</p>
<p>Note that in C, small integer types in variable argument lists are promoted
up to <code>gint</code> or <code>guint</code> as appropriate, and read back accordingly. <code>gint</code> is
32 bits on every platform on which GLib is currently supported. This means that
you can use C expressions of type <code>gint</code> with [<code>new()</code>][Self::new()] and properties of
type <code>gint</code> or <code>guint</code> or smaller. Specifically, you can use integer literals
with these property types.</p>
<p>When using property types of <code>gint64</code> or <code>guint64</code>, you must ensure that the
value that you provide is 64 bit. This means that you should use a cast or
make use of the <code>G_GINT64_CONSTANT</code> or <code>G_GUINT64_CONSTANT</code> macros.</p>
<p>Similarly, <code>gfloat</code> is promoted to <code>gdouble</code>, so you must ensure that the value
you provide is a <code>gdouble</code>, even for a property of type <code>gfloat</code>.</p>
<p>Since GLib 2.72, all <code>GObjects</code> are guaranteed to be aligned to at least the
alignment of the largest basic GLib type (typically this is <code>guint64</code> or
<code>gdouble</code>). If you need larger alignment for an element in a <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a>, you
should allocate it on the heap (aligned), or arrange for your <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> to be
appropriately padded.</p>
<h3 id="object_type"><a class="doc-anchor" href="#object_type">§</a><code>object_type</code></h3>
<p>the type id of the <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> subtype to instantiate</p>
<h3 id="first_property_name"><a class="doc-anchor" href="#first_property_name">§</a><code>first_property_name</code></h3>
<p>the name of the first property</p>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<p>a new instance of
<code>object_type</code>
This function is a wrapper of dgettext() which does not translate
the message if the default domain as set with textdomain() has no
translations for the current locale.</p>
<p>The advantage of using this function over dgettext() proper is that
libraries using this function (like GTK) will not use translations
if the application using the library does not have translations for
the current locale.  This results in a consistent English-only
interface instead of one having partial translations.  For this
feature to work, the call to textdomain() and setlocale() should
precede any g_dgettext() invocations.  For GTK, it means calling
textdomain() before gtk_init or its variants.</p>
<p>This function disables translations if and only if upon its first
call all the following conditions hold:</p>
<ul>
<li>
<p>@domain is not <a href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html#variant.None" title="variant core::option::Option::None"><code>None</code></a></p>
</li>
<li>
<p>textdomain() has been called to set a default text domain</p>
</li>
<li>
<p>there is no translations available for the default text domCreates a new instance of a <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> subtype and sets its properties.</p>
</li>
</ul>
<p>Construction parameters (see <a href="struct.ParamFlags.html#associatedconstant.CONSTRUCT" title="associated constant glib::ParamFlags::CONSTRUCT"><code>ParamFlags::CONSTRUCT</code></a>, <a href="struct.ParamFlags.html#associatedconstant.CONSTRUCT_ONLY" title="associated constant glib::ParamFlags::CONSTRUCT_ONLY"><code>ParamFlags::CONSTRUCT_ONLY</code></a>)
which are not explicitly specified are set to their default values. Any
private data for the object is guaranteed to be initialized with zeros, as
per <code>g_type_create_instance()</code>.</p>
<p>Note that in C, small integer types in variable argument lists are promoted
up to <code>gint</code> or <code>guint</code> as appropriate, and read back accordingly. <code>gint</code> is
32 bits on every platform on which GLib is currently supported. This means that
you can use C expressions of type <code>gint</code> with [<code>new()</code>][Self::new()] and properties of
type <code>gint</code> or <code>guint</code> or smaller. Specifically, you can use integer literals
with these property types.</p>
<p>When using property types of <code>gint64</code> or <code>guint64</code>, you must ensure that the
value that you provide is 64 bit. This means that you should use a cast or
make use of the <code>G_GINT64_CONSTANT</code> or <code>G_GUINT64_CONSTANT</code> macros.</p>
<p>Similarly, <code>gfloat</code> is promoted to <code>gdouble</code>, so you must ensure that the value
you provide is a <code>gdouble</code>, even for a property of type <code>gfloat</code>.</p>
<p>Since GLib 2.72, all <code>GObjects</code> are guaranteed to be aligned to at least the
alignment of the largest basic GLib type (typically this is <code>guint64</code> or
<code>gdouble</code>). If you need larger alignment for an element in a <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a>, you
should allocate it on the heap (aligned), or arrange for your <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> to be
appropriately padded.</p>
<h3 id="object_type-1"><a class="doc-anchor" href="#object_type-1">§</a><code>object_type</code></h3>
<p>the type id of the <a href="object/struct.Object.html" title="struct glib::object::Object"><code>Object</code></a> subtype to instantiate</p>
<h3 id="first_property_name-1"><a class="doc-anchor" href="#first_property_name-1">§</a><code>first_property_name</code></h3>
<p>the name of the first property</p>
<h2 id="returns-1"><a class="doc-anchor" href="#returns-1">§</a>Returns</h2>
<p>a new instance of
<code>object_type</code></p>
</div></details></section></div></main></body></html>